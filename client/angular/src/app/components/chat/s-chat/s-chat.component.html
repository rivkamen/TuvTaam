<div class="chat-layout">
  <app-s-session-list
    [sessions]="sessions"
    [selectedSessionId]="selectedSessionId"
    (sessionSelected)="selectSession($event)"
    (newSessionRequested)="startNewSession()">
  </app-s-session-list>

  <div class="chat-container">
    <br/><br/>
    
    <app-admin-profile-bar
      [userEmail]="userEmail"
      [adminPhotoUrl]="adminPhotoUrl">
    </app-admin-profile-bar>

    <app-new-session-form
      [isVisible]="newSessionMode"
      (sessionCreated)="createNewSession($event)"
      (cancelled)="cancelNewSession()">
    </app-new-session-form>

    <br/>
    
    <div *ngIf="!newSessionMode && selectedSessionId">
      <div *ngIf="loading">טוען הודעות...</div>
      
      <app-s-message-list
        [messages]="messages"
        [loading]="loading"
        [userPhotoUrl]="userPhotoUrl"
        [adminPhotoUrl]="adminPhotoUrl"
        [editMessageId]="editMessageId"
        [editedContent]="editedContent"
        (editStarted)="startEdit($event)"
        (editSaved)="saveEdit($event)"
        (editCancelled)="cancelEdit()"
        (messageDeleted)="deleteMessage($event)"
        (menuToggled)="toggleMenu($event)">
      </app-s-message-list>

      <app-message-input
        [loading]="loading"
        (messageSent)="sendMessage($event)">
      </app-message-input>
    </div>
  </div>
</div>